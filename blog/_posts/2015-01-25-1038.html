---
layout: post
title: "[UE4] Getting Sprint to work (C++)"
date: 2015-01-25 13:29:21.000000000 +00:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Game Development
tags:
- UE4
meta:
  _rest_api_published: '1'
  _rest_api_client_id: "-1"
  _publicize_job_id: '5185852413'
  _elasticsearch_data_sharing_indexed_on: '2024-11-18 14:55:00'
permalink: "/2015/01/25/1038/"
---
<p><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"><br />
<html><body></p>
<p>Getting Shift to sprint in the Unreal Engine 4 is very easy. There are technically two ways of doing it.</p>
<ul>
<li>Change the scale down to say 0.5 and then increase it to 1.0 for sprinting</li>
<li>Change the MaxWalkSpeed for walking and sprinting.</li>
</ul>
<p>I prefer the second technique because it will keep the code simple enough and continue to function as expected with analog controllers.</p>
<p>Lets start by adding the input action bindings</p>
<p>Edit -&gt; Project Settings -&gt; Input -&gt; Bindings and add an action for <strong>Sprint </strong>with <strong>Left Shift</strong> for the key.</p>
<p><img src="{{site.baseurl}}/assets/2015/01/Sprint%2520Keybinding.png" alt=""></p>
<p>All the code is in the Character class.</p>
<p>Within the header file, there are two blueprint variables for the WalkSpeed and SprintSpeed so they can be modified easily.</p>
<p>We also override the BeginPlay() Method. This is used to default to Walking.</p>
<p>Add the following to your character header file</p>
<p>[code language="cpp"]<br />
	/** The speed at which the character will be walking */<br />
	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = Character)<br />
	uint16 WalkSpeed;</p>
<p>	/** The speed at which the character will be sprinting*/<br />
	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = Character)<br />
	uint16 SprintSpeed;</p>
<p>	virtual void BeginPlay();</p>
<p>protected:<br />
	/** Enables Sprinting for the character*/<br />
	void EnableSprint();</p>
<p>	/** Disables Sprinting again */<br />
	void DisableSprint();</p>
<p>[/code]<br />
Add the following to the constructor so we have defaults</p>
<p>[code language="cpp"]<br />
AMyCharacter::AMyCharacter(const FObjectInitializer&amp; ObjectInitializer)<br />
	: Super(ObjectInitializer)<br />
{</p>
<p>    // Other code<br />
	// Set the default Defaults ;-)<br />
	WalkSpeed = 250;<br />
	SprintSpeed = 600;</p>
<p>}</p>
<p>[/code]<br />
Plug in the Sprint action to the methods by adding the following lines into the <strong>SetupPlayerInputComponent</strong> method:</p>
<p>[code language="cpp"]<br />
	InputComponent-&gt;BindAction("Sprint", IE_Pressed, this, &amp;AMyCharacter::EnableSprint);<br />
	InputComponent-&gt;BindAction("Sprint", IE_Released, this, &amp;AMyCharacter::DisableSprint);<br />
[/code]</p>
<p>And implement the rest of the methods</p>
<p>[code language="cpp"]<br />
void AVSCharacter::BeginPlay()<br />
{</p>
<p>    // Ensure the player starts with Walking<br />
	DisableSprint();<br />
}</p>
<p>void AVSCharacter::EnableSprint()<br />
{<br />
	CharacterMovement-&gt;MaxWalkSpeed = SprintSpeed;<br />
	GEngine-&gt;AddOnScreenDebugMessage(-1, 5.f, FColor::Black, TEXT("Sprintin"));<br />
}</p>
<p>void AVSCharacter::DisableSprint()<br />
{<br />
	CharacterMovement-&gt;MaxWalkSpeed = WalkSpeed;<br />
	GEngine-&gt;AddOnScreenDebugMessage(-1, 5.f, FColor::Black, TEXT("Walkin"));<br />
}</p>
<p>[/code]</body></html></p>
