---
layout: post
title: Getting Docker Desktop Working with WSL2 on Windows
date: 2020-05-28 17:29:52.000000000 +01:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Systems (Administration)
tags:
- docker
- docker desktop
- wsl2
meta:
  _publicize_job_id: '44804887047'
  timeline_notification: '1590686992'
  _elasticsearch_data_sharing_indexed_on: '2024-11-18 14:55:04'
permalink: "/2020/05/28/getting-docker-desktop-working-with-wsl2-on-windows/"
---
<p><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"><br />
<!-- wp:paragraph --><html><body></p>
<p>I ran into several issues while trying to get this to work. Here are the steps I had to complete to get it working. Hopefully this will save some hair on your head ;) </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>The main step is to go into the settings in Docker Desktop -&gt; Resources and make sure that your distribution is enabled for docker.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:image {"id":1241,"sizeSlug":"large"} --></p>
<figure class="wp-block-image size-large"><img src="{{site.baseurl}}/assets/2020/05/image.png?w=740" alt="" class="wp-image-1241"></figure>
<p><!-- /wp:image --></p>
<p><!-- wp:list {"ordered":true} --></p>
<ol>
<li>Make sure that you have no docker packages installed on your WSL distribution. Docker Desktop will deploy its own binaries, and any pre-existing binaries will confuse it. This issue exhibited itself for me with errors related to missing files around credentials.</li>
<li>Remove any <code>DOCKER_HOST </code>environment variables. Docker Desktop will sort it out. Docker kept hanging for me until I fixed this.</li>
<li>If you want to use docker as non-root user, add yourself to the <code>docker </code>group.</li>
</ol>
<p><!-- /wp:list --></p>
<p><!-- wp:paragraph --></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Errors / Issues I ran into:</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p><code>docker.credentials.errors.InitializationError: docker-credential-desktop.exe not installed or not available in PATH</code> - Fixed by 1 above.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p><code>docker-compose</code> from WSL2 errors out - Again, fixed by 1</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Unable to run <code>docker</code> as non-root user - fixed by 3.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>Docker hangs when run as non-root user - fixed by 2.</p>
<p><!-- /wp:paragraph --><br />
</body></html></p>
